# std::handle_web_server_events (a function)

  handles events from a web server

  Parameters:
    io: the I/O-object
    events: a list of events

  Result:
    io: the I/O-object
    new_events: a list of new events

  The function handles events from a web server.

  Topic: Network Clients and Servers

  See also: std::start_web_server, std::stop_web_server

  Example:

    $io new(std_types::io)
    start_web_server! &io 8080
    loop:
      $events wait_for_events &io 1000
      handle_web_server_events &io !new_events events
      for_each new_events
        : (event)
          event $type $fd $argument
          case type
            GET:
              $uri argument
              if
                uri == "/":
                  return_http_resource &io fd uri "text/html" "
                    <html>
                      <head>
                        <title>Hello, World!</title>
                      </head>
                      <body>
                        <h1>Hello, World!</h1>
                      </body>
                    </html>
                  :
                    http_resource_not_found &io fd uri
                    next
            UPGRADE_TO_WEBSOCKET:
              $fields argument
              accept_upgrade_to_websocket &io fd fields
              next
            UPGRADED_TO_WEBSOCKET:
              send_websocket_text_message &io fd "Hello, World!"
              next
            WEBSOCKET_MESSAGE:
              $text argument
              log &io -> "WEBSOCKET MESSAGE: @(text)"
              broadcast_websocket_text_message &io fd text
              next
            WEBSOCKET_CLOSED:
              log &io -> "WEBSOCKET CLOSED"
              next
            :
              log &io -> "UNKNOWN EVENT: @(serialize(event))"
              next
          next
      next

((defined in web/server.fky))
((generated by Codestral-22B-v0.1-Q5_K_M.gguf))
((2024-07-03 16:10:11))
